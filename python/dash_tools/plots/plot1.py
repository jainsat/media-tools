import math
import matplotlib.pyplot as plt
import numpy as np

def get_prob_succ(p, n):
    return n * p * math.pow(1-p, n-1)

def get_prob_idle(p,n):
    return math.pow(1-p, n-1)


def get_utilization(p, n, z, k):
    a = 1.0/(z*k)
    b = 1 - get_prob_idle(p, n/k)
    return get_prob_succ(p, n/k) / (a + b)


listk = [1, 2, 3, 4, 5, 6]
listcolor = ['c', 'g', 'b', 'y', 'm', '#EEA51B']
def main():

    actual_bandwidth = [1285, 1693, 1812, 1795, 2182, 1895, 2249, 1775, 1646, 2128, 2064, 2000, 1732, 1853, 2206, 1731, 2312, 1731, 1639, 2323, 1558, 1836, 1679, 2125, 1805, 1743, 2247, 2024, 1893, 2153, 1892, 2236, 1994, 2110, 2335, 1536, 1941, 1929, 1464, 1824, 1628, 1780, 1733, 1952, 1859, 1876, 1355, 1523, 802, 850, 1411, 1198, 1733, 1699, 2000, 1600, 1910, 1151, 1572, 1303, 1061, 1064, 842, 1158, 1104, 879, 751, 684, 994, 891, 1401, 1529, 1869, 1547, 2077, 1639, 1771, 1058, 1199, 1607, 1639, 1451, 1738, 1589, 1834, 1150, 1377, 1201, 807, 846, 568, 369, 250, 521, 418, 1270, 1449, 1261, 1554, 1311, 1541, 1345, 1467, 1350, 1035, 1190, 1202, 1025, 1277, 1218, 1444, 1374, 1154, 1243, 1152, 1104, 1237, 1268, 1444, 1451, 1157, 1858, 1594, 1793, 1502, 1617, 1416, 1299, 1130, 1340, 1216, 1023, 1190, 1102, 1147, 1276, 1335, 1389, 1204, 1388, 1445, 1126, 1758, 1285, 1730, 1383, 1710, 1480, 1693, 1552, 1833, 1421, 1760, 1360, 1838, 1560, 1824, 1410, 1602, 1147, 1290, 1266, 813, 1335, 1180, 848, 1292, 1405, 1220, 1448, 1118, 1502, 1393, 962, 1667, 1291, 1630, 1372, 1719, 1167, 1469, 1476, 1161, 1346, 1335, 1932, 1215, 951, 694, 858, 571, 1259]

    actual_time = [0.0, 1.01, 2.02, 3.03, 4.04, 5.05, 6.06, 7.06, 8.08, 9.09, 10.11, 11.12, 12.13, 13.15, 14.16, 15.16, 16.17, 17.19, 18.19, 19.2, 20.21, 21.21, 22.23, 23.23, 24.24, 25.25, 26.26, 27.28, 28.38, 29.38, 30.4, 31.41, 32.42, 33.43, 34.44, 35.45, 36.46, 37.47, 38.48, 39.49, 40.49, 41.5, 42.52, 43.54, 44.55, 45.65, 46.65, 47.67, 48.7, 49.7, 50.71, 51.72, 52.72, 53.73, 54.74, 55.74, 56.75, 57.76, 58.77, 59.78, 60.8, 61.81, 62.83, 63.83, 64.84, 65.84, 66.86, 67.87, 68.87, 69.88, 70.89, 71.9, 72.9, 73.91, 74.91, 75.92, 76.92, 77.95, 78.95, 80.12, 81.12, 82.24, 83.24, 84.25, 85.26, 86.46, 87.46, 88.47, 89.48, 90.49, 91.7, 92.71, 94.06, 95.07, 96.1, 97.11, 98.12, 99.12, 100.13, 101.14, 102.15, 103.16, 104.17, 105.18, 106.19, 107.2, 108.2, 109.21, 110.22, 111.22, 112.23, 113.24, 114.25, 115.26, 116.3, 117.3, 118.31, 119.31, 120.32, 121.33, 122.35, 123.35, 124.36, 125.37, 126.37, 127.53, 128.55, 129.57, 130.57, 131.57, 132.58, 133.6, 134.62, 135.63, 136.63, 137.65, 138.66, 139.67, 140.78, 141.78, 142.79, 143.79, 144.8, 145.81, 146.82, 147.83, 148.84, 149.84, 150.85, 151.86, 152.87, 153.88, 154.89, 155.89, 156.9, 157.92, 158.93, 159.95, 160.96, 162.11, 163.11, 164.12, 165.12, 166.13, 167.15, 168.16, 169.17, 170.18, 171.19, 172.21, 173.22, 174.24, 175.32, 176.33, 177.35, 178.36, 179.38, 180.39, 181.4, 182.41, 183.42, 184.43, 185.44, 186.45, 187.46, 188.47, 189.48, 190.48, 191.49, 192.51, 193.53, 194.55]

    bola_bitrate = [300, 300, 300, 750, 1850, 1200, 2850, 1200, 1850, 1850, 1850, 1850, 2850, 750, 1850, 1850, 750, 1850, 1850, 750, 1200, 750, 1200, 1850, 1200, 1850, 750, 300, 1200, 1200, 1850, 750, 1200, 1200, 1200, 1200, 1850, 1200, 1200, 1200, 1200, 1850, 1200, 1850, 1200, 750, 1200, 1850]

    bola_time = [1.2443411350250244, 2.3154091835021973, 3.2865781784057617, 5.439603090286255, 9.746171951293945, 12.078492879867554, 17.985198974609375, 20.912617921829224, 24.820526838302612, 28.92809772491455, 32.86475467681885, 36.55871653556824, 42.78129553794861, 44.90707063674927, 48.6719286441803, 54.43717670440674, 56.643773794174194, 60.79132890701294, 67.45350694656372, 70.17582488059998, 75.56206703186035, 77.55996894836426, 80.66409707069397, 85.68360018730164, 88.74833917617798, 94.90237021446228, 101.12241125106812, 101.76186323165894, 105.48293137550354, 109.25090837478638, 115.49895644187927, 117.94506931304932, 122.08979845046997, 126.26961350440979, 129.71341753005981, 133.02369570732117, 138.08785963058472, 142.13263368606567, 145.94164061546326, 149.3540654182434, 152.50764727592468, 157.74602031707764, 160.9103925228119, 166.07176542282104, 170.56297540664673, 173.52705454826355, 176.85557341575623, 182.15436339378357]

    simple_bitrate = [300, 300, 750, 1200, 1200, 1850, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1850, 1850, 1850, 1200, 1200, 1200, 750, 750, 1200, 1200, 1200, 750, 750, 750, 1200, 1200, 1200, 1200, 1200, 750, 300, 1200, 1200, 1200, 750, 750, 1200, 750, 1200, 1200, 1200, 1200, 750, 750, 1200, 1200]

    simple_time = [1.244940996170044, 2.3170061111450195, 4.581942081451416, 7.5024802684783936, 10.121013402938843, 13.652711391448975, 16.056305408477783, 19.115317344665527, 21.59243130683899, 24.043925285339355, 26.934123277664185, 29.5773823261261, 32.079901456832886, 36.298038482666016, 39.68404150009155, 44.01900362968445, 47.028101682662964, 49.57823371887207, 53.81323575973511, 56.19011378288269, 58.081140756607056, 60.91263675689697, 64.90245866775513, 69.19771265983582, 72.84916663169861, 75.69278645515442, 77.7885913848877, 80.0477843284607, 83.75772547721863, 87.14270043373108, 89.91541647911072, 94.5946614742279, 100.54791951179504, 101.56618356704712, 105.66412663459778, 109.18857264518738, 112.74862265586853, 115.26761269569397, 117.53364968299866, 121.72606182098389, 123.97174096107483, 127.60533308982849, 130.65265607833862, 134.4427251815796, 138.86310124397278, 141.6681673526764, 143.72408843040466, 147.12720131874084, 149.42257809638977]

    bba0_bitrate = [300, 750, 1200, 1200, 1200, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1200, 1200, 1850, 1200, 1200, 1200, 1200, 1200, 1200, 1850, 1200, 750, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1850, 1850, 1200, 1200, 1200, 1200, 1200, 1200]

    bba0_time = [1.243783950805664, 3.9784488677978516, 6.804550886154175, 9.397444725036621, 12.284958839416504, 15.560306787490845, 19.56273579597473, 24.11568570137024, 27.99988079071045, 31.879920959472656, 35.724108934402466, 39.425930976867676, 43.91866087913513, 48.75697088241577, 53.76241683959961, 57.35426592826843, 60.26441693305969, 65.50452780723572, 70.83303880691528, 75.84558486938477, 78.85052490234375, 81.67665600776672, 85.65760898590088, 88.45989799499512, 94.2859239578247, 101.74802589416504, 104.2609977722168, 107.15108370780945, 111.24135088920593, 115.70022392272949, 119.35408902168274, 123.67562294006348, 127.14523673057556, 130.46450662612915, 134.59060955047607, 138.79227447509766, 142.2063343524933, 145.83115148544312, 149.3509624004364, 152.613938331604, 156.99373936653137, 162.31739139556885, 165.42372918128967, 169.99320220947266, 174.40827536582947, 178.47113943099976, 181.7927634716034, 184.9670205116272]

    bba2_bitrate = [300, 750, 750, 1200, 1850, 1200, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1200, 1200, 1850, 750, 1200, 1200, 1200, 1200, 1850, 1200, 750, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1850, 1850, 1200, 1200, 1200, 1200, 1200, 1200]

    bba2_time = [1.3915410041809082, 4.402160167694092, 6.270705223083496, 8.948353290557861, 13.302777290344238, 15.392072439193726, 19.29208731651306, 23.896162271499634, 27.834773302078247, 31.71608328819275, 35.64109420776367, 39.205878019332886, 43.66144514083862, 48.525339126586914, 52.605446100234985, 58.65846514701843, 61.498499155044556, 64.87340116500854, 73.47115111351013, 76.16818308830261, 79.23541212081909, 82.05271005630493, 86.00999712944031, 88.82138991355896, 94.3894739151001, 102.04296588897705, 104.57458782196045, 107.41492199897766, 111.46292805671692, 115.99146008491516, 119.61151123046875, 123.94582414627075, 127.5030243396759, 130.75606727600098, 134.77266335487366, 138.98780226707458, 142.45442938804626, 146.09457230567932, 149.6547873020172, 152.95785522460938, 157.35813736915588, 162.63673329353333, 165.7509171962738, 170.25946617126465, 174.69509625434875, 178.76300716400146, 182.1160752773285, 185.25726914405823]

    pensieve_bitrate = [300, 300, 750, 750, 750, 750, 750, 750, 750, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 1850, 750, 750, 300, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750]

    pensieve_time = [0.9087679386138916, 1.6760249137878418, 3.64608097076416, 5.602277994155884, 7.455485820770264, 8.782763719558716, 10.145734786987305, 12.241236925125122, 13.731189012527466, 17.688079118728638, 21.76269817352295, 25.915537118911743, 30.025827169418335, 34.305769205093384, 37.571394205093384, 41.53853631019592, 46.30862236022949, 50.409589529037476, 56.95306158065796, 61.31447958946228, 67.68096947669983, 71.17839360237122, 74.77313947677612, 75.5685625076294, 77.32097434997559, 79.10618329048157, 81.13429617881775, 83.03362321853638, 85.21098327636719, 87.31042122840881, 89.08657002449036, 91.50590014457703, 94.66251516342163, 100.75514531135559, 103.1669054031372, 105.28762221336365, 107.16125917434692, 109.41201210021973, 112.1328980922699, 114.90938091278076, 116.97826910018921, 119.63619995117188, 122.28390407562256, 124.93376588821411, 127.19420790672302, 129.13271188735962, 130.88045597076416, 132.66941714286804]

    plt.plot(bola_time, bola_bitrate, label="Bola", color=listcolor[0], marker=',')
    plt.plot(simple_time, simple_bitrate, label="Simple ABR", color=listcolor[1], marker=',')
    plt.plot(actual_time, actual_bandwidth, label="actual bandwidth", color=listcolor[3], marker=',', linestyle='dashed')
    plt.plot(bba0_time, bba0_bitrate, label="BBA-0", color=listcolor[4], marker=',')
    plt.plot(bba2_time, bba2_bitrate, label="BBA-2", color=listcolor[2], marker=',')
    plt.plot(pensieve_time, pensieve_bitrate, label="Pensieve", color=listcolor[5], marker=',')
    plt.ylabel("Bitrate")
    plt.xlabel("Time")
    plt.legend(loc='best')
    plt.show()


main()
